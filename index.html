<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COPPERMIND | Operational Intelligence Platform</title>
    <style>
        /* --- Enterprise Theme Variables --- */
        :root {
            --bg-app: #0f172a;     /* Deep professional slate */
            --bg-panel: #1e293b;   /* Lighter panel background */
            --bg-hover: #334155;
            --border-color: #334155;
            
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;

            --accent-brand: #3b82f6;   /* Professional Blue */
            --accent-alert: #ef4444;   /* Critical Red */
            --accent-warning: #f59e0b; /* Amber */
            --accent-success: #10b981; /* Emerald Green */
            
            --font-stack: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        /* --- Base Reset & Typography --- */
        * { box-sizing: border-box; }
        body {
            margin: 0;
            font-family: var(--font-stack);
            background-color: var(--bg-app);
            color: var(--text-primary);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        h1, h2, h3, h4 { margin: 0; font-weight: 600; letter-spacing: -0.025em; }
        .mono { font-family: 'Roboto Mono', monospace; }

        /* --- Layout Structure --- */
        .top-nav {
            height: 56px;
            background: var(--bg-panel);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
        }
        .brand { font-size: 1.1rem; font-weight: 700; color: var(--text-primary); letter-spacing: 1px; display: flex; align-items: center; gap: 10px;}
        .brand-tag { font-size: 0.7rem; background: var(--accent-brand); padding: 2px 6px; border-radius: 4px; letter-spacing: 0.5px;}
        .nav-status { font-size: 0.85rem; color: var(--text-secondary); display: flex; align-items: center; gap: 8px; }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--accent-success); }
        .status-dot.alert { background: var(--accent-alert); animation: pulse red 2s infinite; }

        .app-body { flex: 1; display: flex; overflow: hidden; }
        .sidebar {
            width: 50px;
            background: var(--bg-panel);
            border-right: 1px solid var(--border-color);
            display: flex; flex-direction: column; align-items: center; padding-top: 20px; gap: 24px;
        }
        .sidebar-icon { color: var(--text-muted); cursor: pointer; transition: 0.2s; }
        .sidebar-icon:hover, .sidebar-icon.active { color: var(--accent-brand); }
        .main-canvas { flex: 1; padding: 32px; overflow-y: auto; position: relative; }

        /* --- Components --- */
        /* KPI Cards */
        .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 24px; margin-bottom: 32px; }
        .kpi-card { background: var(--bg-panel); border: 1px solid var(--border-color); padding: 20px; border-radius: 6px; }
        .kpi-label { font-size: 0.85rem; color: var(--text-secondary); font-weight: 500; }
        .kpi-value { font-size: 1.75rem; font-weight: 700; margin-top: 12px; }
        .trend { font-size: 0.85rem; margin-left: 8px; }
        .trend.up { color: var(--accent-success); } .trend.down { color: var(--accent-alert); }

        /* Alert List */
        .section-header { margin-bottom: 16px; font-size: 1rem; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; font-weight: 600;}
        .alert-item {
            background: var(--bg-panel); border: 1px solid var(--border-color);
            border-left: 4px solid var(--accent-alert);
            padding: 16px 24px; border-radius: 6px;
            display: flex; justify-content: space-between; align-items: center;
            cursor: pointer; transition: all 0.2s ease-in-out;
        }
        .alert-item:hover { background: var(--bg-hover); border-color: var(--accent-alert); transform: translateX(4px);}
        .alert-title { font-size: 1rem; font-weight: 600; margin-bottom: 6px; display: flex; align-items: center; gap: 8px;}
        .alert-meta { font-size: 0.9rem; color: var(--text-secondary); }
        .btn-investigate { background: rgba(239, 68, 68, 0.1); color: var(--accent-alert); border: 1px solid var(--accent-alert); padding: 8px 16px; border-radius: 4px; font-weight: 600; font-size: 0.85rem; cursor: pointer;}

        /* Incident View Layout */
        .incident-layout { display: none; height: 100%; grid-template-columns: 320px 1fr 360px; gap: 24px; }
        .panel { background: var(--bg-panel); border: 1px solid var(--border-color); border-radius: 6px; display: flex; flex-direction: column; }
        .panel-header { padding: 16px 20px; border-bottom: 1px solid var(--border-color); font-size: 0.95rem; font-weight: 600; color: var(--text-primary); display: flex; align-items: center; gap: 8px; }
        .panel-body { padding: 20px; flex: 1; overflow-y: auto; }
        
        /* Data Grid within Panels */
        .data-grid { display: grid; grid-template-columns: 100px 1fr; gap: 12px 24px; font-size: 0.9rem; align-items: baseline;}
        .label { color: var(--text-secondary); font-weight: 500; }
        .value { font-weight: 600; color: var(--text-primary); }
        .tag { padding: 2px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 600; }
        .tag.vip { background: rgba(245, 158, 11, 0.2); color: var(--accent-warning); }
        .text-alert { color: var(--accent-alert); }

        /* Ontology Visualization (Middle Panel) */
        .ontology-canvas {
            background: #131c2e; /* Slightly darker contrast */
            position: relative;
            flex: 1;
            display: flex; justify-content: center; align-items: center;
            background-image: radial-gradient(var(--border-color) 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .entity-node {
            background: var(--bg-panel); border: 2px solid var(--border-color);
            padding: 12px 16px; border-radius: 8px;
            position: absolute; width: 180px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            z-index: 2;
        }
        .entity-type { font-size: 0.7rem; text-transform: uppercase; color: var(--text-secondary); margin-bottom: 4px; letter-spacing: 0.5px;}
        .entity-id { font-weight: 700; font-size: 0.95rem; }
        .entity-meta { font-size: 0.8rem; color: var(--accent-alert); margin-top: 4px;}
        
        /* Initial States for Animation */
        .node-demand { top: 20%; left: 50%; transform: translate(-50%, 0); border-color: var(--accent-alert); }
        .node-supply-gap { top: 60%; left: 20%; border-color: var(--text-muted); opacity: 0.5; }
        .node-supply-match { top: 60%; right: 20%; border-color: var(--accent-success); opacity: 0; transform: translateY(30px); }

        /* Connector Lines (Simulated visually) */
        .connector {
            position: absolute; height: 2px; background: var(--border-color); 
            transform-origin: left center; z-index: 1; opacity: 0.5;
            transition: 0.6s;
        }

        /* Action Panel & Agent Log */
        .agent-log-container { background: #131c2e; border-radius: 4px; padding: 12px; font-family: 'Roboto Mono', monospace; font-size: 0.8rem; height: 120px; overflow-y: auto; border: 1px solid var(--border-color); margin-bottom: 20px;}
        .log-entry { margin-bottom: 4px; display: flex; gap: 8px; opacity: 0; animation: fade Log 0.3s forwards;}
        .log-ts { color: var(--text-muted); }
        .log-msg { color: var(--accent-brand); }
        .log-msg.success { color: var(--accent-success); }

        .recommendation-box { background: rgba(16, 185, 129, 0.08); border: 1px solid var(--accent-success); border-radius: 6px; padding: 20px; }
        .rec-title { color: var(--accent-success); font-weight: 600; margin-bottom: 12px; display: flex; align-items: center; gap: 8px;}
        .btn-execute { width: 100%; padding: 14px; background: var(--accent-success); color: white; border: none; border-radius: 4px; font-weight: 600; font-size: 1rem; cursor: pointer; transition: 0.2s; display: flex; justify-content: center; align-items: center; gap: 8px;}
        .btn-execute:hover { background-color: #059669; }
        .btn-execute:disabled { background-color: var(--text-muted); cursor: not-allowed; }

        /* Animations */
        @keyframes pulse red { 0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); } 70% { box-shadow: 0 0 0 6px rgba(239, 68, 68, 0); } 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); } }
        @keyframes fadeLog { to { opacity: 1; } }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono&display=swap" rel="stylesheet">
</head>
<body>

    <header class="top-nav">
        <div class="brand">
            COPPERMIND <span class="brand-tag">OS</span>
        </div>
        <div class="nav-status">
            <span class="status-dot alert"></span>
            System Status: 2 Active Operational Alerts
        </div>
    </header>

    <div class="app-body">
        <nav class="sidebar">
            <div class="sidebar-icon active">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
            </div>
            <div class="sidebar-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"></path></svg>
            </div>
            <div class="sidebar-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="16.5" y1="9.4" x2="7.5" y2="4.21"></line><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>
            </div>
        </nav>

        <main class="main-canvas">
            
            <div id="dashboard-view">
                <div class="section-header">Operational Overview (Real-Time)</div>
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-label">Total Vehicle Inventory</div>
                        <div class="kpi-value mono">1,240</div>
                        <div class="trend up">↑ 2% vs last week</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">Today's Deliveries</div>
                        <div class="kpi-value mono">84</div>
                        <div class="trend">On track</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">SLA Compliance Rate</div>
                        <div class="kpi-value mono" style="color:var(--accent-warning)">92.4%</div>
                        <div class="trend down">↓ 1.5% impact</div>
                    </div>
                    <div class="kpi-card" style="border-color: var(--accent-alert);">
                        <div class="kpi-label" style="color:var(--accent-alert)">Revenue at Risk (Today)</div>
                        <div class="kpi-value mono" style="color:var(--accent-alert)">$450,000</div>
                        <div class="kpi-label">2 Critical incidents</div>
                    </div>
                </div>

                <div class="section-header">Critical Alert Stream</div>
                <div class="alert-item" onclick="launchIncidentMode()">
                    <div>
                        <div class="alert-title">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--accent-alert)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                            SLA BREACH RISK: VIP Client Delivery
                        </div>
                        <div class="alert-meta">Client: Intel Corp (CEO) | Order: #9022 | Issue: Missing Critical Component (TCU) | Impact: $5k Penalty + Churn Risk</div>
                    </div>
                    <button class="btn-investigate">INVESTIGATE ></button>
                </div>
            </div>


            <div id="incident-view" class="incident-layout">
                
                <div class="panel">
                    <div class="panel-header">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                        Client Context (CRM)
                    </div>
                    <div class="panel-body">
                        <div class="data-grid">
                            <span class="label">Client Name:</span> <span class="value">Yossi Cohen (Intel CEO)</span>
                            <span class="label">Segment:</span> <span><span class="tag vip">VIP STRATEGIC</span></span>
                            <span class="label">Contract SLA:</span> <span class="value">Strict deadline (Today 14:00)</span>
                            <span class="label">Lifetime Value:</span> <span class="value mono">$450,000</span>
                        </div>
                    </div>
                    <div class="panel-header" style="border-top: 1px solid var(--border-color);">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                        Order Status (ERP)
                    </div>
                    <div class="panel-body">
                        <div class="data-grid">
                            <span class="label">Vehicle:</span> <span class="value">Audi Q7 Black Ed.</span>
                            <span class="label">VIN:</span> <span class="value mono">...WAU9022</span>
                            <span class="label">Status:</span> <span class="value text-alert">BLOCKED (Missing Parts)</span>
                            <span class="label">Missing Part:</span> <span class="value mono text-alert">Trans. Control Unit (TCU)</span>
                            <span class="label">Part ETA:</span> <span class="value mono text-alert">T+7 Days (Import)</span>
                        </div>
                    </div>
                </div>

                <div class="panel" style="overflow: hidden;">
                    <div class="panel-header">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="16.5" y1="9.4" x2="7.5" y2="4.21"></line><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>
                        Operational Ontology View
                    </div>
                    <div class="ontology-canvas">
                        <div class="connector" style="top: 35%; left: 35%; width: 15%; transform: rotate(45deg);"></div>
                        <div id="solution-connector" class="connector" style="top: 65%; right: 35%; width: 15%; transform: rotate(-45deg); opacity:0;"></div>

                        <div class="entity-node node-demand">
                            <div class="entity-type">Sales Order Object</div>
                            <div class="entity-id">VIN #9022</div>
                            <div class="entity-meta">⚠️ AT RISK: Missing TCU</div>
                        </div>

                        <div class="entity-node node-supply-gap">
                            <div class="entity-type">Supply Chain Object</div>
                            <div class="entity-id">Standard Procurement</div>
                            <div class="entity-meta">Lead time: 7 days</div>
                        </div>

                        <div id="solution-node" class="entity-node node-supply-match">
                            <div class="entity-type" style="color:var(--accent-success)">Optimal Solution Object</div>
                            <div class="entity-id">VIN #8841</div>
                            <div class="entity-meta" style="color:var(--accent-success)">Location: Bonded Warehouse (Available)</div>
                        </div>
                    </div>
                </div>

                <div class="panel">
                    <div class="panel-header">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a10 10 0 1 0 10 10H12V2z"></path><path d="M12 2a10 10 0 0 1 10 10H12V2z"></path><path d="M12 2a10 10 0 0 0 10 10H12V2z"></path></svg>
                        Autonomous Agent Analysis
                    </div>
                    <div class="panel-body">
                        <div style="margin-bottom: 12px; font-weight: 500;">Processing Log:</div>
                        <div id="agent-log" class="agent-log-container"></div>

                        <div id="rec-box" class="recommendation-box" style="opacity: 0.5; pointer-events: none;">
                            <div class="rec-title">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                                Recommended Action: VIN SWAP
                            </div>
                            <div class="data-grid" style="margin-bottom: 16px;">
                                <span class="label">Source Asset:</span> <span class="value mono">VIN #8841 (Bonded)</span>
                                <span class="label">Financial Impact:</span> <span class="value" style="color:var(--accent-success)">Avoid $5k Penalty</span>
                                <span class="label">SLA Impact:</span> <span class="value" style="color:var(--accent-success)">On-Time Delivery</span>
                            </div>
                            <button id="execute-btn" class="btn-execute" onclick="executeResolution()">
                                EXECUTE RESOLUTION & WRITE-BACK
                            </button>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <script>
        // Utility for timestamp
        function getTS() {
            return new Date().toISOString().substr(11, 8);
        }

        function addLog(msg, type = '') {
            const log = document.getElementById('agent-log');
            log.innerHTML += `<div class="log-entry"><span class="log-ts">[${getTS()}]</span><span class="log-msg ${type}">${msg}</span></div>`;
            log.scrollTop = log.scrollHeight;
        }

        function launchIncidentMode() {
            document.getElementById('dashboard-view').style.display = 'none';
            document.getElementById('incident-view').style.display = 'grid';

            addLog("Initializing cross-system analysis...");
            
            setTimeout(() => { addLog("Querying ERP for TCU availability (Global)..."); }, 800);
            setTimeout(() => { addLog("ERP Result: No immediate stock. Earliest ETA: 7 days.", "alert"); }, 1800);
            setTimeout(() => { addLog("Ontology Trigger: Scanning alternative supply across all holding yards..."); }, 2800);
            
            setTimeout(() => {
                addLog("MATCH FOUND: Identical configuration detected in Bonded Warehouse (VIN #8841).", "success");
                // Animate graph
                document.getElementById('solution-node').style.opacity = '1';
                document.getElementById('solution-node').style.transform = 'translateY(0)';
                document.getElementById('solution-connector').style.opacity = '1';
            }, 4500);

            setTimeout(() => {
                addLog("Calculating financial implication of swap vs wait...");
            }, 5500);

            setTimeout(() => {
                addLog("Optimization Complete. Recommendation generated.", "success");
                // Enable action box
                document.getElementById('rec-box').style.opacity = '1';
                document.getElementById('rec-box').style.pointerEvents = 'all';
            }, 6500);
        }

        function executeResolution() {
            const btn = document.getElementById('execute-btn');
            btn.disabled = true;
            btn.innerHTML = `<svg class="spinner" viewBox="0 0 50 50" style="width:20px;height:20px;animation:rotate 2s linear infinite;"><circle cx="25" cy="25" r="20" fill="none" stroke="currentColor" stroke-width="5" style="stroke-dasharray:90,150;stroke-dashoffset:0;"></circle></svg> Executing Write-Back...`;

            setTimeout(() => {
                addLog("Writing back to ERP: Reallocating VIN #8841 to Sales Order #9022...", "accent-brand");
            }, 1000);
            
            setTimeout(() => {
                addLog("Updating CRM: Setting status to 'Ready for Delivery'. Sending notification to logistics.", "accent-brand");
            }, 2500);

            setTimeout(() => {
                btn.innerHTML = `✓ RESOLUTION EXECUTED SUCCESSFULLY`;
                btn.style.backgroundColor = '#064e3b'; // Darker green
                addLog("Incident resolved. Systems synchronized.", "success");
            }, 4000);
        }

        // Add rotation animation for spinner dynamically
        const style = document.createElement('style');
        style.innerHTML = `@keyframes rotate { 100% { transform: rotate(360deg); } }`;
        document.head.appendChild(style);
    </script>
</body>
</html>